# HFT Rust Project

Этот проект реализует высокочастотную (HFT) арбитражную стратегию на Rust, оптимизированную для AWS c8i.large (1 физическое ядро + HT).

## Архитектура: Shared-Nothing & Thread Pinning

Проект построен на принципе **Shared-Nothing**, чтобы полностью исключить накладные расходы на синхронизацию (Mutex/RwLock) в критическом пути (Hot Path).

### Как это работает:

Система разделена на два жестко привязанных к ядрам потока:

1.  **Hot Thread (Core 0)**:
    *   **Ответственность:** Работа с сетью (Market Data, Orders), исполнение стратегии, парсинг JSON.
    *   **Ограничения:** ЗАПРЕЩЕНЫ аллокации (Box, Vec, String), системные вызовы (кроме сокетов) и блокировки. Всё работает на стеке или пре-аллоцированных буферах.
    *   **Цикл:** Использует `mio` (epoll) для обработки событий ввода-вывода.

2.  **Cold Thread (Core 1)**:
    *   **Ответственность:** Логирование, тяжелая арифметика, работа с файловой системой.
    *   **Взаимодействие:** Получает данные от Hot Thread через SPSC (Single Producer Single Consumer) Ring Buffer.

### Структура проекта

*   `core/`: Оптимизированные структуры данных (OrderBook), живущие в L1/L2 кэше.
*   `net/`: Низкоуровневая работа с сетью (raw sockets, mio), кастомный WS хендшейк.
*   `strategy/`: Логика принятия решений (Signal, Risk).
*   `ipc/`: Механизмы межпроцессного взаимодействия (RingBuffer).

## Сборка и Запуск

Используем профиль `release` с включенным LTO и `codegen-units = 1` для максимальной производительности:

```bash
cargo build --release
```

## Философия

"Allocation is Failure". Любая динамическая аллокация в горячем цикле считается ошибкой. Мы предпочитаем unsafe код с комментариями медленному безопасному коду, но стараемся оставаться в safe Rust, где это возможно без потерь (`arrayvec`, `rtrb`).
